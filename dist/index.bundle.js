(()=>{"use strict";var t,e={138:(t,e,o)=>{var a=o(964),s=o(576),n=o(953),i=o(455),r=o.n(i);const c=[],l=document.querySelector(".date"),d=document.querySelector(".time"),u=document.querySelector(".username"),y=document.querySelector(".user-role"),p=document.querySelector(".role"),m=document.querySelector(".user-status"),f=document.querySelector("#logOut"),g=document.querySelector("#users"),v=document.querySelector(".fruits-section"),w=document.querySelector(".loader-box"),b=document.querySelector(".no-orders-alert"),h=document.querySelector(".orders-alert"),x=document.querySelector(".clear-all-orders"),q=document.querySelector(".loading-order-box"),T=document.querySelector(".total span"),C=document.querySelector(".customer-info"),$=document.querySelector(".customer-loader-box"),E=document.querySelector(".payment-section");function L(){E.querySelectorAll("li").forEach((t=>{t.classList.remove("active")}))}async function I(t){const e=(0,n.JU)(s.db,"Admins",t),o=(0,n.JU)(s.db,"Cashiers",t),a=await(0,n.QT)(e),i=await(0,n.QT)(o);if(a.exists()){const t=a.data().cart;let e=0;t.forEach((t=>{const o=t.Price,a=t.quantity;e+=o*a})),console.log(e),T.innerText=`$${e}.00`}else if(i.exists()){const t=i.data().cart;let e=0;t.forEach((t=>{const o=t.Price,a=t.quantity;e+=o*a})),console.log(e),T.innerText=`$${e}.00`}}async function A(t){const e=(0,n.JU)(s.db,"Admins",t),o=(0,n.JU)(s.db,"Cashiers",t),a=await(0,n.QT)(e),i=await(0,n.QT)(o);try{if(a.exists()){const t=a.data().cart;t.length>0?(h.innerHTML="",b.style.display="none",x.style.display="block",t.forEach((t=>{const e=t.Id,o=t.Name,a=t.Price,s=t.Image,n=t.quantity;h.innerHTML+=`<div class="order">\n                                            <div class="order-first-section">\n                                                <div class="order-image-box">\n                                                   <img src="${s}"/>\n                                                </div>\n                                           \n                                                <div class="order-info">\n                                                    <p class="order-name">${o}</p>\n                                                    <div class="order-quantity-box">\n                                                        <div data-id="${e}"><button class="order-subtract-button">-</button></div>\n                                                        <div><p>${n}</p></div>\n                                                        <div data-id="${e}"><button class="order-add-button">+</button></div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div class="order-second-section">\n                                                <div class="order-price-box">\n                                                <p class="order-price">$${a}.00</p>\n                                                </div>\n                                                <button data-id="${e}"><ion-icon name="trash-bin-outline" class="order-delete"></ion-icon></button>\n                                            </div>\n                                        </div>`}))):(b.style.display="block",h.innerHTML="",console.log("empty cart"))}else if(i.exists()){const t=i.data().cart;t.length>0?(h.innerHTML="",b.style.display="none",x.style.display="block",t.forEach((t=>{const e=t.Id,o=t.Name,a=t.Price,s=t.Image,n=t.quantity;h.innerHTML+=`<div class="order">\n                                            <div class="order-first-section">\n                                                <div class="order-image-box">\n                                                   <img src="${s}"/>\n                                                </div>\n                                           \n                                                <div class="order-info">\n                                                    <p class="order-name">${o}</p>\n                                                    <div class="order-quantity-box">\n                                                        <div data-id="${e}"><button class="order-subtract-button">-</button></div>\n                                                        <div><p>${n}</p></div>\n                                                        <div data-id="${e}"><button class="order-add-button">+</button></div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div class="order-second-section">\n                                                <div class="order-price-box">\n                                                <p class="order-price">$${a}.00</p>\n                                                </div>\n                                                <button data-id="${e}"><ion-icon name="trash-bin-outline" class="order-delete"></ion-icon></button>\n                                            </div>\n                                        </div>`}))):(x.style.display="none",b.style.display="block",h.innerHTML="",console.log("empty cart"))}}catch(t){console.log("err",t.code)}}document.addEventListener("DOMContentLoaded",(function(){function t(){let t=new Date,e=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),s=e>=12?"PM":"AM",n=`${e}:${o<10?"0":""}${o}:${a<10?"0":""}${a} ${s}`;d.textContent=n,l.textContent=t.toDateString(),u.innerText="AM"===s?"Good Morning,":"PM"===s&&e>=12&&e<=16?"Good Afternoon,":"Good Evening,"}t(),setInterval(t,1e3),(0,a.Aj)(s.I,(t=>{if(t){const e=t.uid;!async function(t){try{const e=(0,n.JU)(s.db,"Admins",t),o=(0,n.JU)(s.db,"Cashiers",t),a=await(0,n.QT)(e),i=await(0,n.QT)(o);if(a.exists()){const t=a.data();y.classList.add("admin"),p.innerText=t.Role,u.innerText=t.Role,m.innerText=t.Username}else if(i.exists()){const e=i.data();console.log("cashier logged in",t),"Cashier"===e.Role&&(g.style.display="none"),y.classList.add("cashier"),p.innerText=e.Role,u.innerText=e.Role,m.innerText=e.Username}else console.log("user doc does not exist")}catch(t){}}(e),A(e),I(e)}else console.log("no-user"),window.location.href="/src/pages/Login/login.html"})),async function(){const t=(0,n.hJ)(s.db,"Fruits");(await(0,n.PL)(t)).forEach((t=>{const e={id:t.id,name:t.data().Name,imagePath:t.data().Img,price:t.data().Price};c.push(e),v.innerHTML+=`<div class="fruit">\n                                             <div class="fruit-image-box">\n                                                <img class="fruit-img" src="${e.imagePath}"/>\n                                             </div>\n                                             <div class="fruit-info">\n                                                 <p class="fruit-name">${e.name}</p>\n                                                 <p class="fruit-price">${e.price}.00</p>\n                                             </div>\n                                             <div class="button-box">\n                                             <button class="btn" data-name="${e.name}" data-image="${e.imagePath}" data-price="${e.price}" data-id="${e.id}"><ion-icon name="cart" class="cart"></ion-icon></button>\n                                             </div>\n                                       </div>`}))}()})),E.addEventListener("click",(t=>{const e=t.target.closest("li");e.parentElement.querySelectorAll("li").forEach((t=>{t.classList.remove("active")})),e.classList.add("active")})),v.addEventListener("click",(t=>{if(t.target.classList.contains("cart")){const e=t.target,o={Id:e.parentElement.dataset.id,Name:e.parentElement.dataset.name,Price:e.parentElement.dataset.price,Image:e.parentElement.dataset.image,quantity:1};(0,a.Aj)(s.I,(t=>{if(t){const e=t.uid;!async function(t,e){w.style.display="block",v.style.opacity="0.5";const o=(0,n.JU)(s.db,"Admins",t),a=(0,n.JU)(s.db,"Cashiers",t),i=await(0,n.QT)(o),c=await(0,n.QT)(a);try{if(i.exists()){const a=i.data().cart;a.push(e),await(0,n.r7)(o,{cart:a}),w.style.display="none",v.style.opacity="1",r().fire({position:"center",icon:"success",title:"Product added to cart successfully",showConfirmButton:!1,timer:1500}),console.log("updated succesfully"),console.log(a),await A(t),await I(t)}else if(c.exists()){const o=c.data().cart;o.push(e),await(0,n.r7)(a,{cart:o}),w.style.display="none",v.style.opacity="1",r().fire({position:"center",icon:"success",title:"Product added to cart successfully",showConfirmButton:!1,timer:1500}),await A(t),await I(t),console.log("updated"),console.log(o)}}catch(t){console.log(t)}}(e,o),A(e)}}))}})),x.addEventListener("click",(()=>{(0,a.Aj)(s.I,(t=>{!async function(t){q.style.display="block",h.style.opacity="0.5";const e=(0,n.JU)(s.db,"Admins",t),o=(0,n.JU)(s.db,"Cashiers",t),a=await(0,n.QT)(e),i=await(0,n.QT)(o);a.exists()?(console.log("all cleared"),await(0,n.r7)(e,{cart:[]}),q.style.display="none",h.style.opacity="1",await A(t),await I(t),console.log("all cleared")):i.exists()&&(q.style.display="block",h.style.opacity="0.5",console.log("all cleared"),await(0,n.r7)(o,{cart:[]}),q.style.display="none",h.style.opacity="1",await A(t),await I(t),console.log("all cleared"))}(t.uid)}))})),h.addEventListener("click",(t=>{if(t.target.classList.contains("order-delete")){const e=t.target.parentElement.dataset.id;(0,a.Aj)(s.I,(t=>{t&&async function(t,e){q.style.display="block",h.style.opacity="0.5";const o=(0,n.JU)(s.db,"Admins",t),a=(0,n.JU)(s.db,"Cashiers",t),i=await(0,n.QT)(o),c=await(0,n.QT)(a);if(i.exists()){const a=i.data().cart,s=a.filter((t=>t.Id!==e));await(0,n.r7)(o,{cart:s}),q.style.display="none",h.style.opacity="1",r().fire({position:"center",icon:"success",title:"Product removed from cart",showConfirmButton:!1,timer:1500}),await I(t),await A(t),console.log("Cart updated successfully"),console.log(a)}else if(c.exists()){const o=c.data().cart,s=o.filter((t=>t.Id!==e));await(0,n.r7)(a,{cart:s}),q.style.display="none",h.style.opacity="1",r().fire({position:"center",icon:"success",title:"Product removed from cart",showConfirmButton:!1,timer:1500}),await I(t),await A(t),console.log("Cart updated successfully"),console.log(o)}}(t.uid,e)}))}})),h.addEventListener("click",(t=>{if(t.target.classList.contains("order-add-button")){const e=t.target.parentElement.dataset.id;(0,a.Aj)(s.I,(t=>{t&&async function(t,e){q.style.display="block",h.style.opacity="0.5";const o=(0,n.JU)(s.db,"Admins",t),a=(0,n.JU)(s.db,"Cashiers",t),i=await(0,n.QT)(o),r=await(0,n.QT)(a);if(i.exists()){const a=i.data().cart;a.forEach((t=>{try{t.Id===e&&(console.log(t.quantity),t.quantity+=1,console.log(t.quantity))}catch(t){console.log(t)}})),await(0,n.r7)(o,{cart:a}),await I(t),await A(t),q.style.display="none",h.style.opacity="1",console.log("increased quantity")}else if(r.exists()){const o=r.data().cart;o.forEach((t=>{try{t.Id===e&&(console.log(t.quantity),t.quantity+=1,console.log(t.quantity))}catch(t){console.log(t)}})),await(0,n.r7)(a,{cart:o}),await I(t),await A(t),q.style.display="none",h.style.opacity="1",console.log("decreased quantity")}}(t.uid,e)}))}else if(t.target.classList.contains("order-subtract-button")){console.log(t.target);const e=t.target.parentElement.dataset.id;(0,a.Aj)(s.I,(t=>{t&&async function(t,e){q.style.display="block",h.style.opacity="0.5";const o=(0,n.JU)(s.db,"Admins",t),a=(0,n.JU)(s.db,"Cashiers",t),i=await(0,n.QT)(o),r=await(0,n.QT)(a);if(i.exists()){const a=i.data().cart;a.forEach((t=>{try{t.Id===e&&(console.log(t.quantity),t.quantity-=1,console.log(t.quantity))}catch(t){console.log(t)}})),await(0,n.r7)(o,{cart:a}),await I(t),await A(t),q.style.display="none",h.style.opacity="1",console.log("increased quantity"),console.log("decreased quantity")}else if(r.exists()){const o=r.data().cart;o.forEach((t=>{try{t.Id===e&&(console.log(t.quantity),t.quantity-=1,console.log(t.quantity))}catch(t){console.log(t)}})),await(0,n.r7)(a,{cart:o}),await I(t),await A(t),q.style.display="none",h.style.opacity="1",console.log("increased quantity"),console.log("decreased quantity")}}(t.uid,e)}))}})),C.addEventListener("submit",(t=>{t.preventDefault(),(0,a.Aj)(s.I,(t=>{t&&async function(t){$.style.display="block";const e=(0,n.JU)(s.db,"Admins",t),o=(0,n.JU)(s.db,"Cashiers",t),a=await(0,n.QT)(e),i=await(0,n.QT)(o);try{if(a.exists()){const o=a.data().cart;if(0===o.length)$.style.display="none",C.reset(),r().fire({position:"center",icon:"error",title:"No Item Added",showConfirmButton:!1,timer:1500});else{const a=(0,n.hJ)(e,"Customers"),s=await(0,n.ET)(a,{CustomerName:C.customerName.value,CustomerPhone:C.customerPhone.value,order:[]});console.log("customer created successfully"),await async function(t,e,o){const a=await(0,n.QT)(t);if(a.exists()){const s=a.data().order;await s.push(...e),await(0,n.r7)(t,{order:s}),console.log("order array update"),console.log(s),await(0,n.r7)(o,{cart:[]}),console.log("cart has been updated succesfully")}}(s,o,e),C.reset(),await A(t),await I(t),L(),$.style.display="none",r().fire({position:"center",icon:"success",title:"Order Completed",showConfirmButton:!1,timer:1500}),console.log("order array updated")}}else if(i.exists()){const e=i.data().cart;if(0===e.length)$.style.display="none",C.reset(),r().fire({position:"center",icon:"error",title:"No Item Added",showConfirmButton:!1,timer:1500});else{const a=(0,n.hJ)(o,"Customers"),s=await(0,n.ET)(a,{CustomerName:C.customerName.value,CustomerPhone:C.customerPhone.value,order:[]});console.log("customer created successfully"),await async function(t,e,o){const a=await(0,n.QT)(t);if(a.exists()){const s=a.data().order;await s.push(...e),await(0,n.r7)(t,{order:s}),console.log("order array update"),console.log(s),await(0,n.r7)(o,{cart:[]}),console.log("cart has been updated succesfully")}}(s,e,o),C.reset(),await A(t),await I(t),L(),$.style.display="none",r().fire({position:"center",icon:"success",title:"Order Completed",showConfirmButton:!1,timer:1500}),console.log("order array updated")}}}catch(t){console.log(t)}}(t.uid)}))})),f.addEventListener("click",(()=>{(0,a.w7)(s.I).then((()=>{console.log("logged out"),window.location.href="/src/pages/Login/login.html"})).catch((t=>{console.log(t)}))}))}},o={};function a(t){var s=o[t];if(void 0!==s)return s.exports;var n=o[t]={exports:{}};return e[t].call(n.exports,n,n.exports,a),n.exports}a.m=e,t=[],a.O=(e,o,s,n)=>{if(!o){var i=1/0;for(d=0;d<t.length;d++){for(var[o,s,n]=t[d],r=!0,c=0;c<o.length;c++)(!1&n||i>=n)&&Object.keys(a.O).every((t=>a.O[t](o[c])))?o.splice(c--,1):(r=!1,n<i&&(i=n));if(r){t.splice(d--,1);var l=s();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[o,s,n]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.j=826,(()=>{var t={826:0};a.O.j=e=>0===t[e];var e=(e,o)=>{var s,n,[i,r,c]=o,l=0;if(i.some((e=>0!==t[e]))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(c)var d=c(a)}for(e&&e(o);l<i.length;l++)n=i[l],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(d)},o=self.webpackChunkpos_system=self.webpackChunkpos_system||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var s=a.O(void 0,[216,576],(()=>a(138)));s=a.O(s)})();